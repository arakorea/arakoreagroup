/* =====================================================
   Mobile PORTRAIT – Simple, reliable interaction (FINAL)
   - No blur / no dim
   - Full color planets
   - Horizontally spaced for easy tapping
   - Vertically centered in the viewport
   - Landscape untouched
   ===================================================== */

@media (max-width: 640px) and (orientation: portrait){

  /* Remove all blur / dimming */
  .planet,
  .planet *{
    filter: none !important;
    opacity: 1 !important;
  }

  /* Ensure universe is the positioning context */
  .universe{
    position: relative !important;
    pointer-events: auto !important;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Restore full star coverage in portrait (avoid a “black band” at bottom) */
  .stars{ transform: none !important; }

  /* Slightly stronger aurora / space wash in portrait so the box reads as one space */
  .universe::before{ opacity: .55 !important; }
  .universe::after{
    content:"";
    position:absolute;
    inset:-10% -10% -30% -10%;
    pointer-events:none;
    background:
      radial-gradient(80% 60% at 50% 95%, rgba(255,255,255,0.035), transparent 70%),
      radial-gradient(60% 55% at 20% 85%, rgba(120,255,210,0.055), transparent 72%),
      radial-gradient(70% 60% at 80% 80%, rgba(140,120,255,0.055), transparent 72%);
    opacity:.9;
    mix-blend-mode: screen;
  }

  /* Center the planets box vertically */
  .planets{
    position: absolute !important;
    left: 0 !important;
    right: 0 !important;
    /* Slightly above true center so labels + RING UI never feel clipped */
    top: calc(50% - 64px) !important;
    transform: translateY(-50%) !important;

    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;

    gap: 56px !important;
    /* Give the strip real vertical breathing room so it reads as one “space” */
    padding: 34px 40px 190px !important;
    height: 480px !important;

    background: transparent !important;

    overflow-x: auto !important;
    overflow-y: visible !important; /* no hard crop: keep labels/halo inside the universe */
    scroll-snap-type: x mandatory !important;
    -webkit-overflow-scrolling: touch !important;
    pointer-events: auto !important;
  }

  .planet{
    position: relative !important;
    left: auto !important;
    top: auto !important;
    /* Scale is driven by JS (center bigger, sides smaller). Default kept modest. */
    transform: scale(var(--pScale, 0.78)) !important;

    flex: 0 0 auto !important;
    width: 96px !important;
    height: 96px !important;
    scroll-snap-align: center !important;

    /* Default: only the centered planet is clickable (JS toggles .is-front) */
    pointer-events: none !important;

    /* Avoid any filter/blur affecting label readability */
    filter: none !important;
    opacity: 1 !important;
  }

  .planet.is-front{ pointer-events: auto !important; }

  /* Subtle “center glow” for the focused planet (kept restrained) */
  .planet.is-front .p-body{
    box-shadow:
      0 0 28px rgba(255,255,255,0.18),
      0 0 120px hsla(var(--hue, 210), 95%, 65%, 0.22) !important;
  }

  /* Labels always readable */
  .planet .p-label{
    opacity: .70 !important;
    transform: translateX(-50%) !important;
    background: none !important;
    filter: none !important;
    text-rendering: geometricPrecision;
  }
  .planet.is-front .p-label{
    opacity: 1 !important;
    transform: translateX(-50%) translateY(-1px) !important;
  }

  /* Hide horizontal scrollbar (WebKit/Firefox) */
  .planets::-webkit-scrollbar{ display:none !important; }
  .planets{ scrollbar-width: none !important; }

  /* Prevent outer wrappers from offsetting center */
  .universe-wrap{
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
}
