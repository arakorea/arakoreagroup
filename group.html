<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ARA KOREA GROUP | Group</title>

<style>
:root{
  --bg:#0B0B0B;
  --text:#F2F2F2;
  --muted:#B8B8B8;
  --line:rgba(255,255,255,.12);
  --max:1180px;

  --logoH-desktop:88px;
  --logoH-mobile:64px;
}

*{box-sizing:border-box}
html, body { height:100%; }

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",sans-serif;
  overflow-x:hidden;
}

a{color:inherit;text-decoration:none}

/* ===== Subtle Space Background ===== */
#tsparticles{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  opacity:0.50;
}
#aurora{
  position:fixed;
  inset:-15%;
  z-index:1;
  pointer-events:none;
  opacity:0;
  filter: blur(34px) saturate(135%);
  mix-blend-mode: screen;
  transform: rotate(-8deg);
  will-change: transform, opacity, filter;
}
@keyframes auroraInOut{
  0%   { opacity:0;   transform:translate3d(var(--ax1), var(--ay1), 0) rotate(var(--ar)); }
  18%  { opacity:var(--ao); }
  60%  { opacity:calc(var(--ao) * 0.65); transform:translate3d(var(--ax2), var(--ay2), 0) rotate(var(--ar)); }
  100% { opacity:0;   transform:translate3d(var(--ax3), var(--ay3), 0) rotate(var(--ar)); }
}
@keyframes auroraHue{
  0%{ filter: blur(34px) saturate(135%) hue-rotate(0deg); }
  100%{ filter: blur(34px) saturate(135%) hue-rotate(16deg); }
}

.page{ position:relative; z-index:2; }

/* ===== GLOBAL HEADER (same as index) ===== */
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:rgba(11,11,11,.88);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--line);
}
.header-inner{
  max-width:var(--max);
  margin:0 auto;
  padding:36px 20px 28px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:22px;
}
.brand img{
  height:var(--logoH-desktop);
  width:auto;
  display:block;
}
nav{
  display:flex;
  gap:32px;
  font-size:14px;
  color:rgba(242,242,242,.62);
}
nav a:hover{color:rgba(242,242,242,.92)}

/* ===== CONTENT ===== */
main{
  max-width:var(--max);
  margin:0 auto;
  padding:72px 20px 84px;
}

.hero{
  text-align:center;
  margin:0 auto 36px;
}
.hero h1{
  margin:0 0 14px 0;
  font-size:40px;
  line-height:1.15;
}
.hero p{
  margin:0 auto;
  max-width:920px;
  font-size:18px;
  line-height:1.7;
  color:rgba(242,242,242,.84);
}

/* Cards */
.grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:22px;
  margin-top:26px;
}
.card{
  border-radius:22px;
  background:rgba(11,11,11,.34);
  border:1px solid rgba(255,255,255,.10);
  padding:22px;
}
.kicker{
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:rgba(242,242,242,.62);
  margin:0 0 10px 0;
}
.card h2{
  margin:0 0 8px 0;
  font-size:20px;
}
.card p{
  margin:0;
  color:rgba(242,242,242,.78);
  line-height:1.65;
  font-size:15.5px;
}
.list{
  margin:14px 0 0 0;
  padding:0;
  list-style:none;
  display:grid;
  gap:10px;
}
.item{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.04);
}
.item strong{
  font-size:14px;
  letter-spacing:.02em;
}
.item span{
  font-size:12px;
  color:rgba(242,242,242,.62);
  text-align:right;
}
.mutedLabel{
  font-size:12px;
  color:rgba(242,242,242,.62);
  margin-top:2px;
}

/* ===== Solar System Map ===== */
.map{
  margin-top:28px;
  border-radius:22px;
  background:rgba(11,11,11,.28);
  border:1px solid rgba(255,255,255,.10);
  padding:24px 18px 22px;
  overflow:hidden;
}
.map-kicker{
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:rgba(242,242,242,.62);
  margin:0 0 10px 4px;
}

.system{
  position:relative;
  width:100%;
  height:520px;
  border-radius:18px;
  background: radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,0.05), transparent 62%);
  perspective: 900px;
  transform-style: preserve-3d;
}

.sunlight{
  position:absolute;
  /* Place the light source off-canvas, like a sun outside the frame */
  left:-240px;
  top:-220px;
  width:620px;
  height:620px;
  border-radius:999px;
  background: radial-gradient(circle at 40% 40%,
    rgba(255,255,255,0.16),
    rgba(120,255,210,0.10) 22%,
    rgba(160,140,255,0.08) 40%,
    rgba(11,11,11,0) 70%);
  filter: blur(2px) saturate(140%);
  mix-blend-mode: screen;
  opacity:0.75;
  animation: sunlightDrift 14s ease-in-out infinite, sunlightPulse 7.2s ease-in-out infinite;
  pointer-events:none;
}
@keyframes sunlightDrift{
  0%,100%{ transform: translate3d(0,0,0) scale(1); }
  50%{ transform: translate3d(38px,22px,0) scale(1.02); }
}
@keyframes sunlightPulse{
  0%,100%{ opacity:0.68; }
  50%{ opacity:0.82; }
}

/* Planet visuals: atmosphere + moving noise texture to sell rotation */
.planet .body::before{
  content:"";
  position:absolute;
  inset:-10%;
  border-radius:999px;
  background: radial-gradient(circle at 40% 40%,
      rgba(255,255,255,0.12),
      rgba(255,255,255,0.04) 38%,
      rgba(255,255,255,0) 70%);
  opacity: calc(0.18 + var(--lit) * 0.22);
  filter: blur(1px);
  mix-blend-mode: screen;
  pointer-events:none;
}
.planet .body::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  /* faux texture + atmosphere banding */
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.10), rgba(255,255,255,0) 45%),
    repeating-radial-gradient(circle at 55% 55%,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.00) 5px,
      rgba(255,255,255,0.03) 9px,
      rgba(255,255,255,0.00) 14px),
    repeating-linear-gradient(115deg,
      rgba(255,255,255,0.055) 0px,
      rgba(255,255,255,0.00) 7px,
      rgba(255,255,255,0.035) 14px,
      rgba(255,255,255,0.00) 22px);
  opacity: calc(0.14 + var(--lit) * 0.18);
  mix-blend-mode: overlay;
  filter: blur(0.2px);
  transform: translateZ(0);
  animation: noiseDrift var(--noiseDur) linear infinite;
  pointer-events:none;
}
@keyframes noiseDrift{
  from{ background-position: 0% 0%, 0% 0%, 0% 0%; }
  to  { background-position: 220% 140%, 120% 220%, 180% 120%; }
}

.orbit{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.orbit::before{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:var(--d);
  height:var(--d);
  transform:translate(-50%,-50%);
  border-radius:999px;
  border:1px dashed rgba(255,255,255,0.14);
  opacity:0.55;
}


.sun .title{
  font-size:13px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:rgba(242,242,242,.92);
  line-height:1.25;
  font-weight:700;
}
.sun .sub{
  margin-top:8px;
  font-size:11px;
  color:rgba(242,242,242,.62);
  letter-spacing:.02em;
}

.planet{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:1px;
  height:1px;
  pointer-events:none; /* no click in group map */

  --ry: 0deg;
  --rx: 0deg;
  --blur: 0px;
  --spinDur: 26s;
  --lit: 0.55;
  --noiseDur: 18s;

  --s: 0.78;
  --a: 0.75;
  --lit: 0.70;
  --z: 0px;
  --ry: 0deg;
  --rx: 0deg;
  --blur: 0px;
  --spinDur: 26s;
  --noiseDur: 18s;
  --spin: 0deg;
}


.planet .body{
  position:absolute;
  left:0; top:0;
  width:var(--size);
  height:var(--size);
  border-radius:999px;
  transform:translate(-50%,-50%) scale(var(--s)) rotate(var(--spin));
  transform-style:preserve-3d;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.22), transparent 46%),
    radial-gradient(circle at 70% 70%, rgba(255,255,255,0.10), transparent 62%),
    radial-gradient(circle, var(--c1), var(--c2));
  border:1px solid rgba(255,255,255,0.18);
  box-shadow: 0 0 calc(18px + var(--lit)*20px) rgba(255,255,255,0.08);
  opacity: calc(var(--a) * (0.70 + var(--lit)*0.55));
  filter:saturate(130%);
  animation: planetSpin var(--spinDur) linear infinite;
}
@keyframes planetSpin{
  from{ --spin: 0deg; }
  to{ --spin: 360deg; }
}

.planet .label{
  position:absolute;
  left:0; top:0;
  transform:
    translate(calc(-50% + 0px), calc(-50% + (var(--size)/2 + 18px)))
    scale(var(--s))
    perspective(600px)
    rotateY(var(--ry))
    rotateX(var(--rx)) translateZ(18px);
  transform-origin: 50% 0%;
  width:max-content;
  max-width:200px;
  text-align:center;
  opacity:calc(var(--a) * 1.05);
  color:rgba(242,242,242,.92);
  font-size:12px;
  letter-spacing:.04em;
  text-transform:uppercase;
  line-height:1.15;
  text-shadow:0 0 12px rgba(0,0,0,0.55);
  will-change: transform, opacity, filter;
  filter: blur(var(--blur));
}
.planet .label small{
  display:block;
  margin-top:6px;
  font-size:11px;
  letter-spacing:.02em;
  text-transform:none;
  color:rgba(242,242,242,.66);
}

.depth-note{
  margin:14px 4px 0;
  color:rgba(242,242,242,.52);
  font-size:12px;
  line-height:1.55;
}

@media (prefers-reduced-motion: reduce){
  #aurora{ display:none; }
  .orbit::before{ opacity:0.22; }
}

/* ===== FOOTER ===== */
footer{
  border-top:1px solid var(--line);
  padding:36px 20px;
  text-align:center;
  font-size:13px;
  color:var(--muted);
}

@media(max-width:980px){
  .grid{ grid-template-columns:1fr; }
  .system{ height:560px; }
}
@media(max-width:640px){
  .brand img{ height:var(--logoH-mobile); }
  nav{ gap:18px; font-size:13px; }
  .hero h1{ font-size:32px; }
  main{ padding:60px 20px 72px; }
  .system{ height:620px; }
  }
</style>
</head>

<body>
<div id="tsparticles" aria-hidden="true"></div>
<div id="aurora" aria-hidden="true"></div>

<div class="page">
  <header>
    <div class="header-inner">
      <a class="brand" href="index.html" aria-label="ARA KOREA GROUP">
        <img src="ara-korea-white.png" alt="ARA KOREA GROUP logo">
      </a>

      <nav aria-label="Primary navigation">
        <a href="index.html">Home</a>
        <a href="group.html" style="color: rgba(242,242,242,.92);">Group</a>
        <a href="business.html">Business</a>
        <a href="platforms.html">Platforms</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <h1>One Group, Multiple Domains</h1>
      <p>
        ARA KOREA GROUP integrates culture-driven initiatives, media platforms, commerce brands,
        and a space-based platform into a single operating structure—built for long-term partnerships and growth.
      </p>
    </section>

    <section class="grid" aria-label="Domains">
      <article class="card">
        <p class="kicker">Culture</p>
        <h2>Culture / NGO / Public Projects</h2>
        <p>
          Cultural programs and public initiatives connecting K-Culture with global communities,
          supported by sustainable planning and partnerships.
        </p>

        <ul class="list">
          <li class="item">
            <div>
              <strong>AKFF</strong>
              <div class="mutedLabel">Ara Korea Film Festival</div>
            </div>
            <span>Festival / Exchange</span>
          </li>
          <li class="item">
            <div>
              <strong>arakorea.org</strong>
              <div class="mutedLabel">K-Culture / NGO</div>
            </div>
            <span>Public Programs</span>
          </li>
        </ul>
      </article>

      <article class="card">
        <p class="kicker">Media</p>
        <h2>Music / Content / Channel</h2>
        <p>
          Under TIKOONZ, we operate media touchpoints—brand, music, and channel distribution—
          connecting audiences with a distinctive creative universe.
        </p>

        <ul class="list">
          <li class="item">
            <div>
              <strong>tikoonz.com</strong>
              <div class="mutedLabel">TIKOONZ</div>
            </div>
            <span>Brand / Music</span>
          </li>
          <li class="item">
            <div>
              <strong>tikoonz.tv</strong>
              <div class="mutedLabel">TIKOONZ</div>
            </div>
            <span>Media Channel</span>
          </li>
        </ul>
      </article>

      <article class="card">
        <p class="kicker">Platform</p>
        <h2>Space-Based Platform</h2>
        <p>
          OURBANG enables scanning, viewing, and trading personal spaces—
          supported by a digital credit system and scalable marketplace operations.
        </p>

        <ul class="list">
          <li class="item">
            <div>
              <strong>ourbang</strong>
              <div class="mutedLabel">Space Platform</div>
            </div>
            <span>Scan / View / Trade</span>
          </li>
        </ul>
      </article>
<article class="card">
        <p class="kicker">Commerce</p>
        <h2>Brand / Product / Retail</h2>
        <p>
          Commerce initiatives that translate identity into products—bridging storytelling, design,
          and retail into tangible value.
        </p>

        <ul class="list">
          <li class="item">
            <div>
              <strong>ICE Jewelry</strong>
              <div class="mutedLabel">Jewelry / Brand Line</div>
            </div>
            <span>Design / Product</span>
          </li>
          <li class="item">
            <div>
              <strong>Shop Portals</strong>
              <div class="mutedLabel">arakorea.shop · tikoonz.shop</div>
            </div>
            <span>Retail / Commerce</span>
          </li>
        </ul>
      </article>
    </section>

    <section class="map" aria-label="Solar system structure map">
<div class="system" id="system">
        <!-- Orbits -->
        <div class="orbit" style="--d: 280px;"></div>
        <div class="orbit" style="--d: 380px;"></div>
        <div class="orbit" style="--d: 480px;"></div>
        <!-- Off-canvas Sunlight Source -->
        <div class="sunlight" aria-hidden="true"></div>

<div class="sub"></div>
          </div>
        </div>

        <!-- Planets (positions updated by JS) -->
        <div class="planet" data-orbit="140" data-speed="0.006842" data-phase="0.0"
             data-name="Culture" data-sub="K-Culture / NGO"
             style="--size: 58px; --c1: rgba(120,255,210,.18); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="190" data-speed="0.005474" data-phase="1.8"
             data-name="Media" data-sub="TIKOONZ"
             style="--size: 54px; --c1: rgba(170,140,255,.18); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="240" data-speed="0.004448" data-phase="3.2"
             data-name="Platform" data-sub="ourbang"
             style="--size: 52px; --c1: rgba(90,210,255,.18); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="240" data-speed="0.004105" data-phase="5.1"
             data-name="Commerce" data-sub="ICE Jewelry / Shops"
             style="--size: 50px; --c1: rgba(255,215,168,.16); --c2: rgba(20,20,20,0);"></div>

        <!-- Moons (sub-units) -->
        <div class="planet" data-orbit="320" data-speed="0.003284" data-phase="0.7"
             data-name="AKFF" data-sub="Film Festival"
             style="--size: 38px; --c1: rgba(255,255,255,.14); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="320" data-speed="0.002874" data-phase="2.4"
             data-name="arakorea.org" data-sub="Public Programs"
             style="--size: 38px; --c1: rgba(190,140,255,.12); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="380" data-speed="0.002600" data-phase="3.9"
             data-name="tikoonz.com" data-sub="Brand / Music"
             style="--size: 36px; --c1: rgba(120,255,170,.12); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="380" data-speed="0.002394" data-phase="5.0"
             data-name="tikoonz.tv" data-sub="Media Channel"
             style="--size: 36px; --c1: rgba(120,180,255,.12); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="420" data-speed="0.002053" data-phase="1.2"
             data-name="ICE Jewelry" data-sub="Product Line"
             style="--size: 36px; --c1: rgba(255,215,168,.12); --c2: rgba(20,20,20,0);"></div>

        <div class="planet" data-orbit="420" data-speed="0.001916" data-phase="4.4"
             data-name="Shop Portals" data-sub="arakorea.shop · tikoonz.shop"
             style="--size: 34px; --c1: rgba(255,255,255,.10); --c2: rgba(20,20,20,0);"></div>
      </div>
</section>
  </main>

  <footer>
    © <span id="y"></span> ARA KOREA GROUP. All rights reserved.
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.12.0/tsparticles.slim.bundle.min.js"></script>
<script>
  document.getElementById("y").textContent = new Date().getFullYear();
  const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  // Subtle starfield (inner page)
  const colorStars = ["#ffffff", "#ffd7a8", "#a8d7ff", "#b7ffcf", "#d7b7ff", "#ffe9f3"];
  const options = {
    fpsLimit: prefersReducedMotion ? 30 : 60,
    fullScreen: { enable: false },
    background: { color: { value: "transparent" } },
    detectRetina: true,
    particles: {
      number: { value: prefersReducedMotion ? 18 : 42, density: { enable: true, area: 1100 } },
      color: { value: colorStars },
      links: { enable: true, distance: 155, color: "#ffffff", opacity: 0.05, width: 1 },
      move: { enable: !prefersReducedMotion, speed: 0.16, random: true, outModes: { default: "out" } },
      opacity: { value: { min: 0.08, max: 0.28 } },
      size: { value: { min: 0.8, max: 2.0 } }
    },
    interactivity: {
      detectsOn: "window",
      events: { onHover: { enable: !prefersReducedMotion, mode: "grab" }, resize: true },
      modes: { grab: { distance: 160, links: { opacity: 0.09 } } }
    }
  };
  if (window.tsParticles) tsParticles.load("tsparticles", options);

  // Aurora: rare and soft
  (function(){
    if (prefersReducedMotion) return;
    const aurora = document.getElementById("aurora");
    function rand(min,max){ return min + Math.random()*(max-min); }
    function pick(arr){ return arr[(Math.random()*arr.length)|0]; }
    function buildAuroraGrad(){
      const palettes = [
        ["rgba(90,255,210,.14)","rgba(140,120,255,.11)","rgba(80,180,255,.10)"],
        ["rgba(120,255,170,.12)","rgba(190,120,255,.10)","rgba(90,210,255,.10)"]
      ];
      const [c1,c2,c3] = pick(palettes);
      const p1x = rand(12,42), p1y = rand(58,86);
      const p2x = rand(58,90), p2y = rand(46,82);
      const p3x = rand(35,78), p3y = rand(10,38);
      aurora.style.background =
        `radial-gradient(48% 36% at ${p1x}% ${p1y}%, ${c1}, transparent 66%),
         radial-gradient(58% 42% at ${p2x}% ${p2y}%, ${c2}, transparent 70%),
         radial-gradient(40% 32% at ${p3x}% ${p3y}%, ${c3}, transparent 72%)`;
    }
    function run(){
      buildAuroraGrad();
      aurora.style.setProperty("--ax1", rand(-34,34)+"px");
      aurora.style.setProperty("--ay1", rand(-26,26)+"px");
      aurora.style.setProperty("--ax2", rand(-130,130)+"px");
      aurora.style.setProperty("--ay2", rand(-105,105)+"px");
      aurora.style.setProperty("--ax3", rand(-85,85)+"px");
      aurora.style.setProperty("--ay3", rand(-65,65)+"px");
      aurora.style.setProperty("--ao", rand(0.04,0.08).toFixed(3));
      aurora.style.setProperty("--ar", rand(-14,14).toFixed(2)+"deg");
      const dur = rand(10,15).toFixed(2) + "s";
      aurora.style.animation = "none";
      void aurora.offsetWidth;
      aurora.style.animation = `auroraInOut ${dur} ease-in-out 1, auroraHue ${dur} linear 1`;
      setTimeout(run, rand(17000, 36000));
    }
    setTimeout(run, 5200 + Math.random()*9000);
  })();

  // ===== Solar system motion (near/far => readable/unreadable) =====
  (function(){
    const system = document.getElementById("system");
    if (!system) return;

    // inject labels
    const planets = Array.from(system.querySelectorAll(".planet"));
    planets.forEach(p => {
      const name = p.getAttribute("data-name") || "";
      const sub  = p.getAttribute("data-sub") || "";
      p.innerHTML = `
        <div class="body"></div>
        <div class="label">${name}${sub ? `<small>${sub}</small>` : ""}</div>
      `;
    });

    if (prefersReducedMotion) {
      // Static arrangement for reduced motion
      const staticAngles = [0.2, 1.8, 3.3, 5.1, 0.9, 2.6, 3.9, 5.0, 1.3, 4.4];
      planets.forEach((p, i) => {
        const r = parseFloat(p.dataset.orbit || "200");
        const a = staticAngles[i % staticAngles.length];
        const x = Math.cos(a) * r;
        const y = Math.sin(a) * r * 0.62; // ellipse
        p.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) translateZ(${(depth*42 - 18).toFixed(2)}px)`;
        p.style.setProperty("--s", 0.78);
        p.style.setProperty("--a", 0.70);
      });
      return;
    }

    const start = performance.now();
    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

    function tick(now){
      const t = (now - start) / 1000;

      // size responsiveness
      const rect = system.getBoundingClientRect();
      const scaleFit = clamp(Math.min(rect.width / 980, 1), 0.72, 1);

      planets.forEach((p, idx) => {
        const r = parseFloat(p.dataset.orbit || "200") * scaleFit;
        const speed = parseFloat(p.dataset.speed || "0.004");
        const phase = parseFloat(p.dataset.phase || "0");
        const angle = t * (Math.PI * 2) * speed + phase;

        // Elliptical orbit for depth illusion
        const x = Math.cos(angle) * r;
        const y = Math.sin(angle) * r * 0.62;

        // depth based on "front" (sin) => when sin is positive, it comes closer
        const depth = (Math.sin(angle) + 1) / 2;           // 0..1
        
        // Lighting from an off-canvas "sun" (top-left). Dot product for day/night feeling.
        // Sunlight source drifts slowly (matches the visual overlay but also drives real lighting)
        const sunX = -rect.width * (0.36 + 0.03 * Math.sin(t * 0.18));
        const sunY = -rect.height * (0.32 + 0.03 * Math.cos(t * 0.16));
  // off top
        const lx = (x - sunX);
        const ly = (y - sunY);
        const lLen = Math.hypot(lx, ly) || 1;
        const lnx = lx / lLen, lny = ly / lLen;

        // Surface normal approx: from center to planet
        const px = x, py = y;
        const pLen = Math.hypot(px, py) || 1;
        const pnx = px / pLen, pny = py / pLen;

        // Facing sun when vectors align
        let lit = (pnx * lnx + pny * lny); // -1..1
        lit = (lit + 1) / 2;              // 0..1
        // Blend with depth (closer = slightly more readable)
        lit = 0.30 + lit * 0.55 + depth * 0.15;
        lit = Math.max(0.18, Math.min(0.95, lit));

        const s = 0.55 + depth * 0.55;                     // scale
        const a = 0.18 + depth * 0.82;                     // opacity

        // put closer objects slightly "in front"
        const z = Math.round(10 + depth * 90);
        p.style.zIndex = z;

        p.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) translateZ(${(depth*42 - 18).toFixed(2)}px)`;

        // Depth-driven readability: closer = flatter + crisp, farther = angled + slightly blurred
        const ry = (1 - depth) * 62;          // 0..62deg
        const rx = (1 - depth) * 12;          // 0..12deg
        const blur = (1 - depth) * 0.85;      // subtle blur when far

        p.style.setProperty("--s", s.toFixed(3));
        p.style.setProperty("--a", a.toFixed(3));
        p.style.setProperty("--ry", `${ry.toFixed(2)}deg`);
        p.style.setProperty("--rx", `${rx.toFixed(2)}deg`);
        p.style.setProperty("--blur", `${blur.toFixed(2)}px`);
        p.style.setProperty("--lit", `${lit.toFixed(3)}`);
        p.style.setProperty("--z", `${(depth*42 - 18).toFixed(2)}px`);
        p.style.setProperty("--spin", `${(angle * 57.2958).toFixed(2)}deg`);
// Give each planet a gentle "self-rotation" speed variation (only set once)
        if (!p.dataset._spinSet){
          const base = 18 + (idx % 7) * 4 + Math.random()*6; // 18s..~48s
          p.style.setProperty("--spinDur", `${base.toFixed(1)}s`);

          // Noise layer drift speed (texture rotation feel)
          const nbase = 12 + (idx % 6) * 3 + Math.random()*6; // 12s..~36s
          p.style.setProperty("--noiseDur", `${nbase.toFixed(1)}s`);

          p.dataset._spinSet = "1";
        }
      });

      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  })();
</script>
</body>
</html>
