/* platforms_mobile_stars.css (FINAL7)
   Mobile-only fixes:
   1) Portrait: show a real starfield (CSS-based) + emphasize center star link
   2) Landscape: planets too large -> shrink planet size ~ 50% without fighting JS transforms
   Desktop unaffected.
*/

/* ===== Starfield that does NOT depend on JS-generated .star elements ===== */
.universe{
  position: relative;
  overflow: hidden;
}

/* Keep any existing haze on ::before; place starfield on ::after */
.universe::after{
  content:"";
  position:absolute;
  inset:0;
  z-index: 0;
  pointer-events:none;
  opacity: 0.55;
  background-image:
    radial-gradient(circle at 12% 18%, rgba(255,255,255,.90) 0 1px, transparent 2px),
    radial-gradient(circle at 72% 22%, rgba(255,255,255,.75) 0 1px, transparent 2px),
    radial-gradient(circle at 48% 62%, rgba(255,255,255,.60) 0 1px, transparent 2px),
    radial-gradient(circle at 84% 78%, rgba(255,255,255,.85) 0 1px, transparent 2px),
    radial-gradient(circle at 22% 72%, rgba(255,255,255,.65) 0 1px, transparent 2px),
    radial-gradient(circle at 35% 40%, rgba(200,220,255,.55) 0 1px, transparent 2px),
    radial-gradient(circle at 62% 48%, rgba(220,200,255,.45) 0 1px, transparent 2px),
    radial-gradient(circle at 10% 85%, rgba(255,235,200,.45) 0 1px, transparent 2px),
    radial-gradient(circle at 90% 12%, rgba(255,255,255,.55) 0 1px, transparent 2px),
    radial-gradient(circle at 58% 10%, rgba(255,255,255,.45) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.25) 0 1px, transparent 2px);
  background-size:
    240px 240px,
    280px 280px,
    260px 260px,
    300px 300px,
    260px 260px,
    340px 340px,
    360px 360px,
    420px 420px,
    380px 380px,
    420px 420px,
    120px 120px;
  background-repeat: repeat;
  filter: blur(0.2px);
}

/* Ensure planets render above starfield */
.planets, .planets *{
  position: relative;
  z-index: 2;
}

/* Center star link should sit above everything */
.portrait-center-link{
  display:none;
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%);
  z-index: 5;
  pointer-events:auto;
  -webkit-tap-highlight-color: transparent;
  width: 220px;
  height: 220px;
  border-radius: 999px;
  text-decoration:none;
}

/* Draw crisp focus star via CSS */
.portrait-center-link::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: 999px;
  background:
    radial-gradient(circle at 50% 50%,
      rgba(255,255,255,0.98) 0%,
      rgba(255,255,255,0.70) 10%,
      rgba(255,255,255,0.20) 26%,
      rgba(255,255,255,0.00) 52%),
    radial-gradient(circle at 38% 36%,
      rgba(180,220,255,0.55) 0%,
      rgba(180,220,255,0.00) 45%),
    radial-gradient(circle at 62% 64%,
      rgba(210,180,255,0.45) 0%,
      rgba(210,180,255,0.00) 48%);
  box-shadow:
    0 0 18px rgba(255,255,255,0.42),
    0 0 54px rgba(140,120,255,0.22),
    0 0 74px rgba(120,255,210,0.18);
  filter: saturate(120%);
}

/* Flare */
.portrait-center-link::after{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width: 120%;
  height: 120%;
  transform: translate(-50%,-50%);
  background:
    linear-gradient(transparent 46%, rgba(255,255,255,0.55) 50%, transparent 54%),
    linear-gradient(90deg, transparent 46%, rgba(255,255,255,0.55) 50%, transparent 54%),
    linear-gradient(45deg, transparent 47%, rgba(255,255,255,0.22) 50%, transparent 53%),
    linear-gradient(-45deg, transparent 47%, rgba(255,255,255,0.22) 50%, transparent 53%);
  opacity: 0.55;
  pointer-events:none;
}

.portrait-center-link:active{
  transform: translate(-50%, -50%) scale(0.985);
}

/* ===== Mobile PORTRAIT ===== */
@media (max-width: 640px) and (orientation: portrait){
  /* ensure stars visible even with strong vignette */
  .universe::after{ opacity: 0.60; }

  /* show center focus star */
  .portrait-center-link{
    display:block;
    width: 220px;
    height: 220px;
  }

  /* soften dark overlay that can hide details */
  .universe-wrap::after{
    background: radial-gradient(circle at 50% 45%,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,0.26) 58%,
      rgba(0,0,0,0.40) 100%) !important;
  }
}

/* ===== Mobile LANDSCAPE ===== */
@media (max-width: 980px) and (orientation: landscape){
  /* Make planets ~ half size WITHOUT touching JS transforms */
  .planet{
    width: calc(var(--sz) * 0.5) !important;
    height: calc(var(--sz) * 0.5) !important;
  }

  /* Keep labels readable but not huge */
  .planet .p-label{ transform: translateY(calc(var(--sz) * 0.25)) scale(0.9) !important; transform-origin: 50% 0; }

  /* Slightly denser small stars */
  .universe::after{
    background-size:
      160px 160px,
      180px 180px,
      170px 170px,
      190px 190px,
      170px 170px,
      220px 220px,
      240px 240px,
      260px 260px,
      240px 240px,
      260px 260px,
      90px 90px;
    opacity: 0.55;
  }

  /* show center star smaller */
  .portrait-center-link{
    display:block;
    width: 180px;
    height: 180px;
  }
}
